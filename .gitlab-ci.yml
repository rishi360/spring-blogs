image: maven:3.3.9

before_script:

  - curl -fL https://getcli.jfrog.io | sh

  - ./jfrog rt config --url $ARTIFACTORY_URL --user $ARTIFACTORY_USER --password=$ARTIFACTORY_PASS --interactive=false
stages:
  - build
  - test
build:
    stage: build
    script: 
    
    -   mvn clean package
  
    - ./jfrog rt u "multi*/*.jar"  testrepo --build-name=testrepo --build-number=$CIRCLE_BUILD_NUM --flat=false
unitTests:
  stage: test
  script:
    - mvn test

   